; Exercise 2: mov, xchg instructions and Direct Offset Operands

.386
.model flat,stdcall
.stack 4096
ExitProcess proto,dwExitCode:dword

.data
	arrayD DWORD 1,2,3

	;=========================================
	;    arrayD
	;    +----+     +----+     +----+
	;    | 01 |00   | 02 |04   | 03 |08
	;    +----+     +----+     +----+
	;    | 00 |01   | 00 |05   | 00 |09
	;    +----+     +----+     +----+
	;    | 00 |02   | 00 |06   | 00 |10
	;    +----+     +----+     +----+ 
	;    | 00 |03   | 00 |07   | 00 |11
	;    +----+     +----+     +----+ 
	;
	; VS output : 01 00 00 00 02 00 00 00 03 00 00 00
	;=========================================

.code
main proc

	mov eax,arrayD
	;=================================================
	;  EAX    : 01 00 00 00
	;  arrayD : 01 00 00 00 02 00 00 00 03 00 00 00
	;=================================================

	xchg eax,[arrayD+4]
	;=================================================
	; EAX    : 02 00 00 00
	; arrayD : 01 00 00 00 01 00 00 00 03 00 00 00
	;=================================================
	
	xchg eax,[arrayD+8]
	;=================================================
	; EAX    : 03 00 00 00
	; arrayD : 01 00 00 00 01 00 00 02 00 00 00
	;=================================================

	;xchg eax,[arrayD]
	mov [arrayD], eax 
	;=================================================
	; EAX    : 03 00 00 00
	; arrayD : 03 00 00 00 01 00 00 02 00 00 00
	;=================================================

	invoke ExitProcess,0
main endp
end main